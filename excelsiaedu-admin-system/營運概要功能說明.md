# 營運概要功能說明

## 功能概述

在營收統計模組中新增了「營運概要」功能，提供三個餅圖來視覺化分析營業額數據：

### 1. 老師營業額比例
- 顯示各教師的營業額佔總營業額的比例
- 以餅圖形式呈現，包含金額和百分比
- 支援多月份數據合併計算

### 2. 課程營業額比例
- 顯示各課程的營業額佔總營業額的比例
- 課程名稱格式：年級+科目（如：中一數學）
- 支援多月份數據合併計算

### 3. 年級營業額比例
- 顯示各年級的營業額佔總營業額的比例
- 年級包括：中一、中二、中三、中四、中五、中六
- 支援多月份數據合併計算

## 使用方法

### 訪問營運概要
1. 在側邊欄點擊「營收統計」
2. 在下拉選單中選擇「營運概要」
3. 或直接訪問 `/revenue/overview` 路徑

### 月份篩選功能
- 分為兩個篩選欄：年份（單選）和月份（多選）
- **年份選擇**：下拉選單，可選擇特定年份或全部年份
- **月份選擇**：包含13個選項（全部月份+12個月）
- 每個月份選項左邊都有小正方形，點擊後顯示√
- 支援搜尋功能，可輸入關鍵字篩選月份
- 支援多選：點擊小正方形或月份文字可選擇/取消選擇
- 選擇「全部月份」時，所有月份都會被選中
- 選擇具體月份時，「全部月份」會被取消選擇
- 下方會顯示已選擇的月份列表

### 圖表互動
- 滑鼠懸停在餅圖上可查看詳細信息
- 顯示格式：教師/課程/年級名稱: $金額 (百分比%)
- 圖例位於圖表下方，支援點擊隱藏/顯示

## 技術實現

### 依賴套件
- `chart.js`: 圖表庫
- `react-chartjs-2`: React Chart.js 組件

### 數據處理
- 根據選中的月份篩選課堂數據
- 按教師、課程、年級分別統計營業額
- 自動計算百分比和格式化金額

### 響應式設計
- 支援桌面和移動設備
- 圖表自動調整大小
- 月份選擇器在小螢幕上優化佈局

## 樣式特色

### 月份選擇器
- 分為年份和月份兩個篩選欄
- 年份：下拉選單，單選
- 月份：輸入框形式，點擊後顯示選項列表
- 支援搜尋功能，可輸入關鍵字篩選
- 每個月份選項左邊都有小正方形
- 點擊小正方形後顯示√標記
- 懸停效果和選中狀態反饋
- 支援多選操作（點擊小正方形或文字）
- 「全部月份」有特殊邏輯：選擇時所有月份都會被選中
- 下方顯示已選擇的月份列表

### 圖表容器
- 卡片式設計，帶陰影效果
- 統一的圓角和間距
- 清晰的標題和邊框

### 無數據狀態
- 當沒有數據時顯示「無數據」提示
- 保持佈局一致性

## 注意事項

1. 確保後端服務器正在運行（端口4000）
2. 需要有課堂數據才能顯示圖表
3. 圖表會根據選中的月份動態更新
4. 支援同時選擇多個月份進行數據合併
5. 先選擇年份，再選擇月份。點擊小正方形或月份文字可選擇或取消選擇

## 未來擴展

- 可考慮添加更多圖表類型（柱狀圖、折線圖等）
- 可添加數據導出功能
- 可考慮添加時間範圍選擇器
- 可添加更多篩選條件（如按教師、課程等） 